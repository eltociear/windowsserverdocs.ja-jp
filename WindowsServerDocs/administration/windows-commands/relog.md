---
title: relog
description: パフォーマンスカウンターの情報をパフォーマンスログファイルから抽出する方法について説明します。
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 7480f6c0-9953-4d70-9b1c-b27e09d8db13
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: 8cff76e1897c5e5791107bbaf5b7a254a6cd4bb4
ms.sourcegitcommit: bf887504703337f8ad685d778124f65fe8c3dc13
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/16/2020
ms.locfileid: "83437107"
---
# <a name="relog"></a>relog

> 適用対象: Windows Server (半期チャネル)、Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

TSV (タブ区切りのテキスト)、CSV (コンマ区切りのテキスト)、バイナリ、または SQL など、他の形式にパフォーマンス カウンターのログからパフォーマンス カウンターを抽出します。

## <a name="syntax"></a>構文
```
relog [<FileName> [<FileName> ...]] [/a] [/c <path> [<path> ...]] [/cf <FileName>] [/f  {bin|csv|tsv|SQL}] [/t <Value>] [/o {OutputFile|DSN!CounterLog}] [/b <M/D/YYYY> [[<HH>:] <MM>:] <SS>] [/e <M/D/YYYY> [[<HH>:] <MM>:] <SS>] [/config {<FileName>|i}] [/q]
```

#### <a name="parameters"></a>パラメーター

|                                         パラメーター                                          |                                                                                                                                                                  説明                                                                                                                                                                   |
|--------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                *ファイル名* [*FileName...*]                                 |                                                                                                                      既存のパフォーマンス カウンター ログのパス名を指定します。 複数の入力ファイルを指定できます。                                                                                                                      |
|                                             -a                                             |                                                                                                          出力ファイルを上書きする代わりに追加します。 このオプションは、SQL 形式の既定値は常に追加するには適用されません。                                                                                                           |
|                                   -c*パス*[*パス...*]                                   |                                                       ログに記録するパフォーマンス カウンターのパスを指定します。 複数のカウンターパスを指定するには、それらをスペースで区切り、カウンターパスを引用符で囲みます (たとえば、 **"**<em>Counterpath1</em> <em>Counterpath2</em>**"**)。                                                       |
|                                       -cf*ファイル名*                                       |                                            Relog ファイルに含まれるパフォーマンス カウンターの一覧をテキスト ファイルのパス名を指定します。 カウンター パスを入力ファイルで、行ごとに 1 つは、このオプションを使用します。 既定値は、元のログ ファイル内のすべてのカウンターをログします。                                            |
|                                  -f {bin \| csv \| tsv \| SQL}                                  |                                       出力ファイルの形式のパス名を指定します。 既定の形式は **bin**します。 出力ファイルで指定して、SQL データベース、 *DSN です。CounterLog*します。 DSN (データベースのシステム名) を構成する ODBC マネージャーを使用して、データベースの場所を指定できます。                                        |
|                                         -t*値*                                         |                                                                                                           [サンプリング間隔を指定"*N*"レコードです。 Relog ファイルにすべての n 番目のデータ ポイントが含まれています。 既定値は、すべてのデータ ポイントです。                                                                                                           |
| -o {*OutputFile* \| *"SQL: DSN!Counter_Log*}。 DSN は、システムで定義されている ODMC dsn です。 |                                                   出力ファイルまたは SQL データベースのカウンターの書き込み先のパス名を指定します。 <br>注:64 ビットバージョンと32ビットバージョンの Relog では、ODBC データソース (それぞれ64ビットおよび32ビット) で DSN を定義する必要があります。                                                   |
|                          -b \< *M* / *D* / *YYYY*> [[*HH*:]*MM*:]*SS*                           |                                                                          指定する入力ファイルから最初のレコードのコピー開始時刻。 日付と時刻は、 <em>M</em> **/** <em>D</em> **/** <em>YYYYHH</em>**:**<em>MM</em>**:**<em>SS</em>という正確な形式にする必要があります。                                                                          |
|                          -e \< *M* / *D* / *YYYY*> [[*HH*:]*MM*:]*SS*                           |                                                                           入力ファイルから最後のレコードのコピーの終了時刻を指定します。 日付と時刻は、 <em>M</em> **/** <em>D</em> **/** <em>YYYYHH</em>**:**<em>MM</em>**:**<em>SS</em>という正確な形式にする必要があります。                                                                            |
|                                -config {*FileName* \| *は*}                                 | コマンド ライン パラメーターを含む設定ファイルのパス名を指定します。 使用 *-i* コマンドライン上に配置が入力ファイルの一覧については、プレース ホルダーとして、構成ファイルにします。 コマンド ラインでする必要はありませんを使用する *は*です。 また、.blg などのワイルドカードを使用して、 \* 多くの入力ファイル名を指定することもできます。 |
|                                             -Q                                             |                                                                                                                          入力ファイルで指定されたログファイルのパフォーマンスカウンターと時間範囲を表示します。                                                                                                                           |
|                                             -y                                             |                                                                                                                                            すべての質問に対する "yes" に応答することで、プロンプトをバイパスします。                                                                                                                                             |
|                                             /?                                             |                                                                                                                                                      コマンド プロンプトにヘルプを表示します。                                                                                                                                                      |

## <a name="remarks"></a>解説
カウンター パスの形式:
- カウンターパスの一般的な形式は次のとおりです。 [ \\ \< computer>] \\ \< オブジェクト> [ \< 親>\\<インスタンス # インデックス>] \\ \< カウンター>]。形式の親、インスタンス、インデックス、およびカウンターの各コンポーネントに有効な名前またはワイルドカード文字を含めることができます。 コンピューター、親、インスタンス、およびインデックスのコンポーネントでは、すべてのカウンタは必要ありません。
- 使用するカウンター パスを決定すると、自体カウンターに基づいています。 LogicalDisk オブジェクトのインスタンスがなど <Index>, ので、< #index > または、ワイルドカードを指定する必要があります。 したがって、 **\LogicalDisk ( \* / \* # \* \\ ) \\ **の形式を使用できます。*
- 一方、Process オブジェクトでは、インスタンスインデックス> は必要ありません \< 。 したがって、次の形式を使用する可能性があります: **\Process (\*) \ID プロセス**
- ワイルドカード文字が、親の名前で指定されている場合は、指定したインスタンスおよびカウンター フィールドに一致する指定したオブジェクトのすべてのインスタンスが返されます。
- インスタンス名にワイルドカード文字を指定すると場合、は、指定したインデックスに対応するすべてのインスタンス名にワイルドカード文字が一致する場合に指定されたオブジェクトと親オブジェクトのすべてのインスタンスが返されます。
- カウンター名にワイルドカード文字を指定すると、指定したオブジェクトのすべてのカウンターが返されます。
- 一部のカウンター パス文字列の一致 (たとえば、pro *) がサポートされていません。

カウンター ファイル:
-   カウンター ファイルは、1 つ以上の既存のログでのパフォーマンス カウンターを一覧表示されるテキスト ファイルです。 完全なカウンター名をログから**コピーするか**、 \< コンピューター>\\ \< オブジェクト>\\ \< インスタンス>\\ \< カウンター> 形式で出力します。 各行に1つのカウンターパスを一覧表示します。

カウンターをコピーするには。
-   実行すると、 **relog** コピーは必要な場合の形式の変換の入力ファイルですべてのレコードからカウンターを指定します。 ワイルドカードのパスは、カウンター ファイルで許可されます。
保存する入力ファイルのサブセット。
-   使用して、 **/t** に入力ファイルを挿入することを指定するパラメーターの出力の間隔でのファイルすべて <n>番目のレコードです。 既定では、すべてのレコードからデータがログされます。
使用して **/b** と **/e** ログ ファイルを持つパラメーター
-   出力ログの開始時刻より前に、のレコードに含めることを指定することができます (つまり、 **/b**) データを書式設定された値の計算値を必要とするカウンターを指定します。 出力ファイルは、タイムスタンプを使用した入力ファイルから最後のレコードがより小さい **/e** (つまり、終了時刻) のパラメーターです。
使用して、 **/config** オプション。
-   使用される設定ファイルの内容、 **/config** オプションは、次の形式である必要があります。
    -   \<>\\ \< 値> です。ここで、 \< 指定した> はコマンドラインオプションで、 \< 値> 値を指定します。

Windows Management Instrumentation (WMI) スクリプトへの**relog**の組み込みの詳細については、 [Microsoft Windows リソースキットの Web サイト](https://go.microsoft.com/fwlink/?LinkId=4665)にある wmi のスクリプトに関するページを参照してください。

## <a name="examples"></a>例
既存のトレース ログをリサンプル 30 固定間隔で、カウンター パスの一覧で、ファイルとフォームの出力します。
```
relog c:\perflogs\daily_trace_log.blg /cf counter_file.txt /o c:\perflogs\reduced_log.csv /t 30 /f csv
```
既存のトレース ログをリサンプル 30 固定間隔で、カウンター パスと出力ファイルの一覧を表示します。
```
relog c:\perflogs\daily_trace_log.blg /cf counter_file.txt /o c:\perflogs\reduced_log.blg /t 30
```
既存のトレースログをデータベースに再サンプリングするには、次のように使用します。
```
relog "c:\perflogs\daily_trace_log.blg" -f sql -o "SQL:sql2016x64odbc!counter_log"
```

## <a name="additional-references"></a>その他のリファレンス
-   - [コマンド ライン構文の記号](command-line-syntax-key.md)
